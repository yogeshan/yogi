$('.vol-img').click(function(){if($('.vol-img').hasClass('mute')){$("#volume").slider({value:100});musiz.volume=1;effx.volume=1;$('.vol-img').removeClass('mute');$('.vol-img img').attr('src','img/volume-up-128.png')}else{musiz.volume=0;effx.volume=0;$('.vol-img').addClass('mute');$('.vol-img img').attr('src','img/mute-128.png')}});$("#volume").slider({min:0,max:100,value:100,orientation:"vertical",range:"min",animate:true,slide:function(event,ui){musiz.volume=ui.value/100;effx.volume=ui.value/100}});var musiz=document.createElement('audio');var effx=document.createElement('audio');if(effx.canPlayType('audio/mp3')){effx.src='sound/2.wav'}else if(effx.canPlayType('audio/ogg')){effx.src='sound/2.ogg'}effx.volume=1;$('body').append(musiz);$('body').append(effx);function playAudio(){if(musiz.canPlayType('audio/mp3')){musiz.src='sound/1.ogg'}else if(musiz.canPlayType('audio/ogg')){musiz.src='sound/1.ogg'}musiz.setAttribute('loop','loop');musiz.volume=1;musiz.play()}function playEffect(){if(effx_flag){if(effx.canPlayType('audio/mp3')){effx.src='sound/2.wav'}else if(musiz.canPlayType('audio/ogg')){effx.src='sound/2.ogg'}effx.play()}}playAudio();$('audio').eq(0).on('canplay canplaythrough',function(){});$('.btnNew').click(function(){new_game();$('.home-box').addClass('hide');$('.loader').addClass('active');setTimeout("$('.game-done-container').removeClass('active');",600);setTimeout("$('.player-box-left').addClass('active');",1200)});$('.btnHome').click(function(){$('.game-done-container').removeClass('active')});var GAME_DONE=false;var nim_comp_timer;$('.game-container.active .item').live('click',function(){var itemIndex=$(this).index();var rowIndex=$(this).parent().index();var nextAllLength=$(this).nextAll().length;var nextAllHidden=$(this).nextAll('.hide-item').length;var counter=nextAllLength-nextAllHidden;counter++;for(i=0;i<counter;i++){player_draught(rowIndex+1)}$('.player-box-left').removeClass('active');if(!GAME_DONE){$('.player-box-right').addClass('active')}var rndtime=getRandomInt(1000,2500);$('.game-container').removeClass('active');$('.item img').attr('src','img/try/Nim_Hex_bnw.png');if(!GAME_DONE){nim_comp_timer=setTimeout(function(){$('.game-container').addClass('active');$('.item img').attr('src','img/try/Nim Hex.png');$('.player-box-right').removeClass('active');$('.player-box-left').addClass('active');computer_draught();if(a[1]+a[2]+a[3]+a[4]==1){console.log('Computer won already')}},rndtime)}});var z,sp,next_to_that,a=new int_array(4);var im=134456;var ia=8121;var ic=28411;var iran;randomize();new_game();var medium_conter=1;var game_level='easy';function randomize(){var now=new Date();iran=now.getSeconds()}function new_game(){a[1]=1;a[2]=3;a[3]=5;a[4]=7;next_to_that=6;GAME_DONE=false;medium_conter=1;$('.item img').attr('src','img/try/Nim Hex.png');$('.game-container').addClass('active');$('.game-container .item').removeClass('hide-item')}function one_way(row){a[row]--;$('.game-container .item').eq((row-1)*(row-1)+a[row]).addClass('hide-item')}function player_draught(row){if(a[1]+a[2]+a[3]+a[4]!=0){if((next_to_that==5||next_to_that==6)&&a[row]!=0){next_to_that=row}if(next_to_that==row&&a[row]!=0){one_way(row)}if(a[1]+a[2]+a[3]+a[4]==0){GAME_DONE=true;clearTimeout(nim_comp_timer);$('.winner-text').text('Computer won');$('.winner-img img').attr('src','img/monitor-128.png');$('.game-container').removeClass('active');$('.player-box-left').removeClass('active');$('.player-box-right').removeClass('active');$('.home-box').removeClass('hide');$('.step-1').addClass('active');$('.step-2').removeClass('active');$('.btn-online').removeClass('animated').removeClass('wobble-down');$('.btn-computer').removeClass('animated').removeClass('wobble-up');$('.btn-online').removeClass('active');$('.btn-container').removeClass('play-online');$('.user-container').removeClass('active');$('.btn-computer').removeClass('active');$('.btn-container').removeClass('play-comp');$('.level-container').removeClass('active');$('.loader').removeClass('active');$('.game-done-container').addClass('active')}}}function m_way(row){while(a[row]<sp){sp--;$('.game-container .item').eq((row-1)*(row-1)+sp).addClass('hide-item')}}function chance(imax){iran=(iran*ia+ic)%im;return(Math.floor(iran/im*imax))}function winning_position(){var q,r,s;q=(a[1]^a[2]^a[3]^a[4])==0;r=(a[1]|a[2]|a[3]|a[4])==1;s=q^r;return(s)}function computer_draught(){if(game_level=='easy'){if(a[1]+a[2]+a[3]+a[4]!=0){if(next_to_that!=5&&a[1]+a[2]+a[3]+a[4]!=0){next_to_that=5;z=chance(4)+1;var flg=false;var rnd=getRandomInt(0,10);if(rnd%2==0){flg=true}if(winning_position()||flg){while(a[z]==0){z=(z%4)+1}one_way(z)}else{while(!winning_position()){z=(z%4)+1;while(a[z]==0){z=(z%4)+1}sp=a[z];while(!winning_position()&&a[z]!=0){a[z]--}if(!winning_position()){a[z]=sp}}m_way(z)}}if(a[1]+a[2]+a[3]+a[4]==0){GAME_DONE=true;clearTimeout(nim_comp_timer);$('.winner-text').text('You won');$('.winner-img img').attr('src','img/monitor-128.png');$('.game-container').removeClass('active');$('.player-box-left').removeClass('active');$('.player-box-right').removeClass('active');$('.home-box').removeClass('hide');$('.step-1').addClass('active');$('.step-2').removeClass('active');$('.btn-online').removeClass('animated').removeClass('wobble-down');$('.btn-computer').removeClass('animated').removeClass('wobble-up');$('.btn-online').removeClass('active');$('.btn-container').removeClass('play-online');$('.user-container').removeClass('active');$('.btn-computer').removeClass('active');$('.btn-container').removeClass('play-comp');$('.level-container').removeClass('active');$('.loader').removeClass('active');$('.game-done-container').addClass('active')}}}else if(game_level=='medium'){if(a[1]+a[2]+a[3]+a[4]!==0){if(next_to_that!=5&&a[1]+a[2]+a[3]+a[4]!=0){next_to_that=5;z=chance(4)+1;var flg=false;if(medium_conter%3==0){flg=true}medium_conter++;if(winning_position()||flg){while(a[z]==0)z=(z%4)+1;one_way(z)}else{while(!winning_position()){z=(z%4)+1;while(a[z]==0){z=(z%4)+1}sp=a[z];while(!winning_position()&&a[z]!=0){a[z]--}if(!winning_position()){a[z]=sp}}m_way(z)}}if(a[1]+a[2]+a[3]+a[4]==0){GAME_DONE=true;clearTimeout(nim_comp_timer);$('.winner-text').text('You won');$('.winner-img img').attr('src','img/monitor-128.png');$('.game-container').removeClass('active');$('.player-box-left').removeClass('active');$('.player-box-right').removeClass('active');$('.home-box').removeClass('hide');$('.step-1').addClass('active');$('.step-2').removeClass('active');$('.btn-online').removeClass('animated').removeClass('wobble-down');$('.btn-computer').removeClass('animated').removeClass('wobble-up');$('.btn-online').removeClass('active');$('.btn-container').removeClass('play-online');$('.user-container').removeClass('active');$('.btn-computer').removeClass('active');$('.btn-container').removeClass('play-comp');$('.level-container').removeClass('active');$('.loader').removeClass('active');$('.game-done-container').addClass('active')}}}else if(game_level=='hard'){if(a[1]+a[2]+a[3]+a[4]!=0){if(next_to_that!=5&&a[1]+a[2]+a[3]+a[4]!=0){next_to_that=5;z=chance(4)+1;if(winning_position()){while(a[z]==0)z=(z%4)+1;one_way(z)}else{while(!winning_position()){z=(z%4)+1;while(a[z]==0)z=(z%4)+1;sp=a[z];while(!winning_position()&&a[z]!=0)a[z]--;if(!winning_position())a[z]=sp}m_way(z)}}if(a[1]+a[2]+a[3]+a[4]==0){GAME_DONE=true;clearTimeout(nim_comp_timer);$('.winner-text').text('You won');$('.winner-img img').attr('src','img/monitor-128.png');$('.game-container').removeClass('active');$('.player-box-left').removeClass('active');$('.player-box-right').removeClass('active');$('.home-box').removeClass('hide');$('.step-1').addClass('active');$('.step-2').removeClass('active');$('.btn-online').removeClass('animated').removeClass('wobble-down');$('.btn-computer').removeClass('animated').removeClass('wobble-up');$('.btn-online').removeClass('active');$('.btn-container').removeClass('play-online');$('.user-container').removeClass('active');$('.btn-computer').removeClass('active');$('.btn-container').removeClass('play-comp');$('.level-container').removeClass('active');$('.loader').removeClass('active');$('.game-done-container').addClass('active')}}}}function int_array(length){this.length=length}$('.game-container.active .item img').live('mouseover',function(){$(this).attr('src','img/try/Nim Hex2.png');$(this).parent().nextAll().find('img').attr('src','img/try/Nim Hex2.png')});$('.game-container.active .item img').live('mouseout',function(){$('.item img').attr('src','img/try/Nim Hex.png')});$('.hex-level-center').click(function(){if($(this).index()==0){game_level='easy'}else if($(this).index()==1){game_level='medium'}else if($(this).index()==2){game_level='hard'}new_game();$('.home-box').addClass('hide');$('.loader').addClass('active');setTimeout("$('.player-box-left').addClass('active');",1200)});$('.hex-pix-center').click(function(){new_game();$('.home-box').addClass('hide');$('.loader').addClass('active');setTimeout("$('.player-box-left').addClass('active');",1200)});$(".user-container").mCustomScrollbar({theme:"light-thin",scrollButtons:{enable:true},advanced:{updateOnContentResize:true},autoHideScrollbar:Boolean,callbacks:{onTotalScroll:function(){console.log('Hello')},onTotalScrollBack:function(){console.log('Back')}}});function adjust(){var windowheight=$(window).height();var windowwidth=$(window).width();var pagecenterW=windowwidth/2;var pagecenterH=windowheight/2;$(".hex").css({top:pagecenterH-330+'px',left:pagecenterW-400+'px'})}$(window).resize(function(){adjust()});adjust();if($.browser.webkit){var $scene=$('.parallax').parallax({calibrateY:true,invertY:true,scalarX:80,scalarY:80,frictionX:0.01,frictionY:0.01})}$('.setting').click(function(){$('.hex').removeClass('right-active');$('.hex').toggleClass('left-active')});$('.info').click(function(){$('.hex').removeClass('left-active');$('.hex').toggleClass('right-active')});$('.btn-play').click(function(){$('.step-1').removeClass('active');$('.step-2').addClass('active');$('.btn-online').addClass('animated').addClass('wobble-down');$('.btn-computer').addClass('animated').addClass('wobble-up')});$('.btn-online').click(function(){$('.btn-computer').removeClass('active');$('.btn-container').removeClass('play-comp');$('.level-container').removeClass('active');$(this).addClass('active');$('.btn-container').addClass('play-online');$('.user-container').addClass('active')});$('.btn-computer').click(function(){$('.btn-online').removeClass('active');$('.btn-container').removeClass('play-online');$('.user-container').removeClass('active');$(this).addClass('active');$('.btn-container').addClass('play-comp');$('.level-container').addClass('active')});function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}