
<!DOCTYPE html>
<html>
    <head>
        <title>Nim</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            *{margin: 0;padding: 0;}
            *, *:after, *::before {
                -moz-box-sizing: border-box;
                box-sizing: border-box;
            }
            ::selection
            {
                background: transparent;
            }
            ::-moz-selection
            {
                background: transparent;
            }
            @font-face {
                font-family: '3';
                src: url('font/1-regular-webfont.woff');
            } 
            @font-face {
                font-family: 'sancreek';
                src: url('font/Sancreek/Sancreek-Regular.ttf');

            }
        </style>
        <link rel="stylesheet" href="css/nim.css" />
        <link rel="stylesheet" href="js/CustomScroll/jquery.mCustomScrollbar.css" />
    </head>
    <body>
        <div class="parallax">
            <div class="layer" data-depth="0.20">
                <div class="bg"></div>
            </div>
        </div>

        <div class="hex">
            <div class="player-box-left">
                <img src="img/Nim.png" />
                <div class="player-img">
                    <div class="hex-player-right">
                        <div class="hex-player-left">
                            <div class="hex-player-center">
                                <style>
                                    .vs-comp{
                                        display: none;
                                    }
                                    .vs-player{

                                    }
                                    .player-propic{
                                        min-width: 160px;
                                        margin-top: 0px !important;
                                    }
                                </style>
                                <div class="vs-comp">
                                    <img src="img/contacts-128.png" /> 
                                    <ul class="loader">

                                        <li></li>
                                        <li></li>
                                        <li></li>
                                    </ul>
                                </div>
                                <div class="vs-player">
                                    <img class="player-propic" alt="Yogesh" src="http://openseesame.tcs.com/OpenIgnite/Portfolio/struts/common/GetImage.action?usersId=170673&dmns=200&reqst=5b424062383761333263fx9c0a4717ef5130ce9ad95d0e80dd24ba004d2853da095e3b8470fd8e4b5d7633fb50472d41744fb4f3b386945466b3ac105975edec3a3a42d380c8f04ad419545" />
                                </div>
                            </div>
                        </div>    
                    </div>
                </div>
            </div>
            <div class="player-box-right">
                <img src="img/Nim_rt.png" />
                <div class="player-img">
                    <div class="hex-player-right p2">
                        <div class="hex-player-left">
                            <div class="hex-player-center">
                                <div class="vs-comp">
                                    <img src="img/monitor-128.png" style="width: 110px;margin-top: 27px;"/>
                                    <ul class="loader" style="top:44px">
                                        <li></li>
                                        <li></li>
                                        <li></li>
                                    </ul>
                                </div>
                                <div class="vs-player">
                                    <img class="player-propic" alt="Yogesh" src="http://openseesame.tcs.com/OpenIgnite/Portfolio/struts/common/GetImage.action?usersId=170673&dmns=200&reqst=5b424062383761333263fx9c0a4717ef5130ce9ad95d0e80dd24ba004d2853da095e3b8470fd8e4b5d7633fb50472d41744fb4f3b386945466b3ac105975edec3a3a42d380c8f04ad419545" />
                                </div>
                            </div>
                        </div>    
                    </div>
                </div>
            </div>
            <div class="setting">
                <img src="img/gear-2-128.png" />
            </div>
            <div class="left-box">
                <div class="volume-con">
                    <div style="">
                        <div id="volume"></div>
                    </div>
                    <div class="vol-img">
                        <img src="img/volume-up-128.png" />
                    </div>
                </div>
            </div>
            <div class="info">
                <img src="img/info-5-128.png" />
            </div>
            <div class="right-box">
                <div class="inst-title">How to play?</div>
                <div class="inst-row">Nim is a strategy game where you have to remove one or more objects in a row by clicking on it.</div>
                <div class="inst-row">To win the game, you must not click the last object.</div>
                <div class="inst-row">Players alternately moves.</div>
                <div class="inst-last">All the best!!!</div>
                <div class="evil-pump"><img src="img/evil.png" /></div>
            </div>
            <div class="home-box">
                <div class="nim-title">Nim</div>
                <div class="btn-container-anim">

                    <div class="btn-container">
                        <div class="step-1 active">
                            <img class="btn-play" src="img/play-128.png" />
                        </div>
                        <div class="step-2">
                            <div class="btn-online">
                                <img  src="img/contacts-128.png" />
                            </div>
                            <div class="play-against">Play Against</div>
                            <div class="btn-computer">
                                <img src="img/monitor-128.png" />
                            </div>
                        </div>
                    </div>
                </div>

                <div class="user-container">
                    <div></div>
                    <div class="user">
                        <div class="hex-pix-right">
                            <div class="hex-pix-left">
                                <div class="hex-pix-center">
                                    <img class="propic" src="img/contacts-128.png" />
                                    <!--<img class="propic" src="http://openseesame.tcs.com/OpenIgnite/Portfolio/struts/common/GetImage.action?usersId=167831&dmns=140&reqst=5b424036333130623735fx942404a2efc87257fde55a20f4420f391b0a8e94a46a7afabc2622dbe83cac67735c208caf1467e6b4bf401dd6a4f9a61a58912d989d373c30ac4c8ae55126227" />-->
                                </div>
                            </div>    
                        </div>
                        <div class="user-name">
                            Yogesh
                            <div class="ol-status active"></div>
                        </div>
                    </div>
                    <div class="user">
                        <div class="hex-pix-right">
                            <div class="hex-pix-left">
                                <div class="hex-pix-center">
                                    <img class="propic" src="img/contacts-128.png" />
                                    <!--<img class="propic" src="http://openseesame.tcs.com/OpenIgnite/Portfolio/struts/common/GetImage.action?usersId=170673&dmns=140&reqst=5b424062383761333263fx9c0a4717ef5130ce9ad95d0e80dd24ba004d2853da095e3b8470fd8e4b5d7633fb50472d41744fb4f3b386945466b3ac105975edec3a3a42d380c8f04ad419545" />-->
                                </div>
                            </div>    
                        </div>
                        <div class="user-name">Manish<div class="ol-status active"></div></div>
                    </div>

                </div>
                <div class="level-container">

                    <div class="level-thumb">
                        <div class="hex-level-right">
                            <div class="hex-level-left">
                                <div class="hex-level-center">
                                    Easy 
                                </div>
                            </div>    
                        </div>
                    </div><div class="level-thumb">
                        <div class="hex-level-right">
                            <div class="hex-level-left">
                                <div class="hex-level-center">
                                    Medium
                                </div>
                            </div>    
                        </div>
                    </div><div class="level-thumb">
                        <div class="hex-level-right">
                            <div class="hex-level-left">
                                <div class="hex-level-center">
                                    Hard 
                                </div>
                            </div>    
                        </div>
                    </div>
                </div>
                <div class="game-container active">


                    <div class="row">
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>   
                        <div class="item">
                            <img src="img/try/Nim_Hex.png" />
                        </div>
                    </div>


                </div>
                <div class="game-done-container">

                    <div class="done-left">
                        <div class="winner-img">
                            <!--<img  src="img/monitor-128.png" />-->
                            <img src="img/contacts-128.png" />
                        </div> 
                    </div>
                    <div class="done-right">
                        <div class="w-temp">
                            <div class="winner-text">You Won</div>
                            <div class="c-opt">
                                <div class="btnHome replay-con" style="width: 30%;left:20%;">
                                    <img src="img/home-6-64.png" />
                                    <div class="bring-up" >Home</div>
                                </div>
                                <div class="btnNew replay-con" style="width: 30%;right: 20%;">
                                    <img src="img/recurring-appointment-64.png" />
                                    <div class="bring-up">Replay</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <script src="../js/jQuery1.8.3.js"></script>
        <script src="js/jquery.parallax.min.js"></script>
        <script src="js/CustomScroll/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="js/jquery-ui.js"></script>
        <script>
            //***********************************************
            //***********************************************
            //******************MUSIZ STARTS****************
            //***********************************************
            //***********************************************
            $('.vol-img').click(function(){
                if($('.vol-img').hasClass('mute')){
                    $( "#volume" ).slider({ value: 100 });
                    musiz.volume=1;
                    effx.volume=1;
                    $('.vol-img').removeClass('mute');
                    $('.vol-img img').attr('src','img/volume-up-128.png');
                }else{
                    musiz.volume=0;
                    effx.volume=0;
                    $('.vol-img').addClass('mute');
                    $('.vol-img img').attr('src','img/mute-128.png');
                }
            });
            
            $( "#volume" ).slider({
                min: 0,
                max: 100,
                value: 100,
                orientation: "vertical",
                range: "min",
                animate: true,
                slide: function( event, ui ) {
                    musiz.volume=ui.value/100;
                    effx.volume=ui.value/100;
                }
            });
            
            
            
            
            var musiz=document.createElement('audio');
            var effx=document.createElement('audio');
            if(effx.canPlayType('audio/mp3')){
                effx.src='sound/2.wav';
            }else if(effx.canPlayType('audio/ogg')){
                effx.src='sound/2.ogg';
            }
            //            effx.setAttribute('loop','1');
            effx.volume=1;
                
            $('body').append(musiz);
            $('body').append(effx);
            function playAudio(){
                if(musiz.canPlayType('audio/mp3')){
                    musiz.src='sound/1.ogg';
                }else if(musiz.canPlayType('audio/ogg')){
                    musiz.src='sound/1.ogg';
                }
                musiz.setAttribute('loop','loop');
                musiz.volume=1;
                musiz.play();
            }
            
            function playEffect(){
                if(effx_flag){
                    if(effx.canPlayType('audio/mp3')){
                        effx.src='sound/2.wav';
                    }else if(musiz.canPlayType('audio/ogg')){
                        effx.src='sound/2.ogg';
                    }
                    effx.play();
                }
                
            }
            //            playAudio();
            $('audio').eq(0).on('canplay canplaythrough', function(){
                
            });
            
            //***********************************************
            //***********************************************
            //******************MUSIZ ENDS******************
            //***********************************************
            //***********************************************
            
            $('.btnNew').click(function(){
                new_game();
                $('.home-box').addClass('hide');
                $('.loader').addClass('active');
                
                //Important
                setTimeout("$('.game-done-container').removeClass('active');",600);
                setTimeout("$('.player-box-left').addClass('active');",1200);
                
            });
            $('.btnHome').click(function(){
                $('.game-done-container').removeClass('active');
            });
            //********************************************************************            
            //****************************GAME STARTS*******************************
            //********************************************************************            
            var GAME_DONE=false;
            var nim_comp_timer;
            
            var z,sp,next_to_that,
            a = new int_array(4);
            var im=134456;
            var ia=8121;
            var ic=28411;
            var iran;
            
            var medium_conter=1;
            var game_level='easy';
            var game_timer=new Date();
            $('.game-container.active .item').live('click',function(){

                var rowIndex=$(this).parent().index();
                var nextAllLength=$(this).nextAll().length;
                var nextAllHidden=$(this).nextAll('.hide-item').length;
                var counter=nextAllLength-nextAllHidden;
                counter++;
                for (i = 0; i < counter; i++) {
                    player_draught(rowIndex+1);
                }
                $('.player-box-left').removeClass('active');
                if(!GAME_DONE){
                    $('.player-box-right').addClass('active');
                }
                var rndtime=getRandomInt(1000, 2500);
                $('.game-container').removeClass('active');
                $('.item img').attr('src','img/try/Nim_Hex_bnw.png');
                if(!GAME_DONE){
                    nim_comp_timer=setTimeout(function()
                    {
                    
                        $('.game-container').addClass('active');
                        $('.item img').attr('src','img/try/Nim_Hex.png');
                        $('.player-box-right').removeClass('active');
                        $('.player-box-left').addClass('active');
                        computer_draught();
                        if(a[1]+a[2]+a[3]+a[4]==1){
                            console.log('Computer won already');
                            whatever('c');
                        }
                    },rndtime);
                }
                
                
            });
            
            

            randomize();
            new_game();
            
            function randomize()
            {
                var now  =new Date();
                iran=now.getSeconds();
            }
            function new_game() {
                a[1]=1;a[2]=3;a[3]=5;a[4]=7;
                next_to_that=6;
                
                GAME_DONE=false;
                medium_conter=1;
                $('.item img').attr('src','img/try/Nim_Hex.png');
                $('.game-container').addClass('active');
                $('.game-container .item').removeClass('hide-item');
                game_timer=new Date();
            }
            
            
            function one_way(row) {
                a[row]--;
                $('.game-container .item').eq((row-1)*(row-1)+a[row]).addClass('hide-item');
                
            }

            function player_draught(row) {
                if (a[1]+a[2]+a[3]+a[4]!=0) {
                    if ((next_to_that==5 || next_to_that==6) && a[row]!=0){
                        next_to_that=row;
                    }
                    if (next_to_that==row && a[row]!=0)
                    {
                        one_way(row);
                    }
                    if (a[1]+a[2]+a[3]+a[4]==0){
                        //                        if(nim_comp_timer!=null)
                        GAME_DONE=true;
                        clearTimeout(nim_comp_timer);
                        $('.winner-text').text('Computer won');
                        $('.winner-img img').attr('src','img/monitor-128.png');
                        $('.game-container').removeClass('active');
                        $('.player-box-left').removeClass('active');
                        $('.player-box-right').removeClass('active');
                        
                        
                        
                        $('.home-box').removeClass('hide');
                
                        $('.step-1').addClass('active');
                        $('.step-2').removeClass('active');
                        $('.btn-online').removeClass('animated').removeClass('wobble-down');
                        $('.btn-computer').removeClass('animated').removeClass('wobble-up');
                
                
                        $('.btn-online').removeClass('active');
                        $('.btn-container').removeClass('play-online');
                        $('.user-container').removeClass('active');
                
                        $('.btn-computer').removeClass('active');
                        $('.btn-container').removeClass('play-comp');
                        $('.level-container').removeClass('active');
                
                        $('.loader').removeClass('active');
                        
                        
                        $('.game-done-container').addClass('active');
                        //                        alert("Sorry... I won!");
                    }
                        
                }
            }

            function m_way(row) {
                while (a[row]<sp) {
                    sp--;
                    $('.game-container .item').eq((row-1)*(row-1)+sp).addClass('hide-item');
                    
                }
            }

           

            function chance(imax)
            {
                iran=(iran*ia+ic) % im;
                return(Math.floor(iran/im*imax));
            }

            function winning_position() {
                var q,r,s;
                q=(a[1] ^ a[2] ^ a[3] ^ a[4])==0;
                r=(a[1] | a[2] | a[3] | a[4])==1;
                s=q ^ r;
                return (s);
            }
            
            function computer_draught() {
                
                if(game_level=='easy'){
                    if (a[1] + a[2] + a[3] + a[4] != 0) {
                        if (next_to_that != 5 && a[1] + a[2] + a[3] + a[4] != 0) {
                            next_to_that = 5;
                            z = chance(4) + 1;
                            
                            var flg=false;
                            var rnd=getRandomInt(0, 10);
                            if(rnd%2==0){
                                flg=true;
                            }
                            
                            if (winning_position()|| flg) {
                                while (a[z] == 0){
                                    z = (z % 4) + 1;
                                }
                                one_way(z);
                            }else{
                                while (!winning_position()) {
                                    z=(z % 4)+1;
                                    while (a[z]==0){ z=(z % 4)+1;}
                                    sp=a[z];
                                    while (!winning_position() && a[z]!=0){ a[z]--;}
                                    if (!winning_position()) {a[z]=sp;}
                                }
                                m_way(z);
                            }
                            
                            
                        }
                        if (a[1]+a[2]+a[3]+a[4]==0){
                            GAME_DONE=true;
                            clearTimeout(nim_comp_timer);
                            whatever('p');
                            game_over();
                            
                        }
                    }
                }else if(game_level=='medium'){
                    if (a[1] + a[2] + a[3] + a[4] !== 0) {
                        if (next_to_that != 5 && a[1] + a[2] + a[3] + a[4] != 0) {
                            next_to_that = 5;
                            z = chance(4) + 1;
                            var flg=false;
                            if(medium_conter%3==0){
                                flg=true;
                            }
                            medium_conter++;
                            if (winning_position()||flg) {
                                while (a[z] == 0)
                                    z = (z % 4) + 1;             
                                one_way(z);
                              
                            }
                            else {               
                                while (!winning_position()) {
                                    z=(z % 4)+1;
                                    while (a[z]==0){ z=(z % 4)+1;}
                                    sp=a[z];
                                    while (!winning_position() && a[z]!=0){ a[z]--;}
                                    if (!winning_position()) {a[z]=sp;}
                                }
                                m_way(z);
                            }
                        }
                        if (a[1]+a[2]+a[3]+a[4]==0){
                            GAME_DONE=true;
                            clearTimeout(nim_comp_timer);
                            whatever('p');
                            game_over();
                        }
                    }
                    
                }else if(game_level=='hard'){
                    
                    
                    if (a[1]+a[2]+a[3]+a[4]!=0) {
                        if (next_to_that!=5 && a[1]+a[2]+a[3]+a[4]!=0) {
                            next_to_that=5;
                            z=chance(4)+1;
                            if (winning_position()) {
                                while (a[z]==0) z=(z % 4)+1;
                                one_way(z);
                            }
                            else {
                                while (!winning_position()) {
                                    z=(z % 4)+1;
                                    while (a[z]==0) z=(z % 4)+1;
                                    sp=a[z];
                                    while (!winning_position() && a[z]!=0) a[z]--;
                                    if (!winning_position()) a[z]=sp;
                                }
                                m_way(z)
                            }
                        }
                    
                        if (a[1]+a[2]+a[3]+a[4]==0){
                            GAME_DONE=true;
                            clearTimeout(nim_comp_timer);
                            whatever('p');
                            game_over();
                        }
                        

                    }
                    
                    
                }
                
               
                
            }

            function int_array(length) { this.length=length; }
            
            
            //********************************************************************            
            //****************************GAME ENDS*******************************
            //********************************************************************            
            $('.game-container.active .item img').live('mouseover',function(){
                $(this).attr('src','img/try/Nim_Hex_brgt.png');
                $(this).parent().nextAll().find('img').attr('src','img/try/Nim_Hex_brgt.png');
            });
            $('.game-container.active .item img').live('mouseout',function(){
                $('.item img').attr('src','img/try/Nim_Hex.png');
                
            });
            
            $('.hex-level-center').click(function(){
                if($(this).index()==0){
                    game_level='easy';
                }else if($(this).index()==1){
                    game_level='medium';
                }else if($(this).index()==2){
                    game_level='hard';
                }
                new_game();
                $('.home-box').addClass('hide');
                $('.loader').addClass('active');
                
                
                //Important
                setTimeout("$('.player-box-left').addClass('active');",1200);
                
                
            });
            $('.hex-pix-center').click(function(){
                new_game();
                game_level='easy';
                $('.home-box').addClass('hide');
                $('.loader').addClass('active');
                
                //Important
                setTimeout("$('.player-box-left').addClass('active');",1200);
            });
            $(".user-container").mCustomScrollbar({
                theme:"light-thin",
                scrollButtons:{
                    enable:true
                },
                advanced:{
                    updateOnContentResize: true
                },
                autoHideScrollbar: Boolean,
                callbacks:{
                    onTotalScroll:function(){
                        console.log('Hello');
                    },
                    onTotalScrollBack:function(){
                        console.log('Back');
                    }
                }
            });
            
            function adjust() {
                var windowheight = $(window).height();
                var windowwidth = $(window).width();
                var pagecenterW = windowwidth / 2;
                var pagecenterH = windowheight / 2;
                $(".hex").css({top: pagecenterH - 330 + 'px', left: pagecenterW - 400 + 'px'});
                
            }
            $(window).resize(function() {
                /* do something */
                adjust();
            });
            adjust();
            if($.browser.webkit ){
                var $scene = $('.parallax').parallax(
                {
                    calibrateY: true,
                    invertY: true,
                    scalarX: 80,
                    scalarY: 80,
                    frictionX: 0.01,
                    frictionY: 0.01
                });
                
            }
            
            $('.setting').click(function(){
                $('.hex').removeClass('right-active');
                $('.hex').toggleClass('left-active');
            });
            $('.info').click(function(){
                $('.hex').removeClass('left-active');
                $('.hex').toggleClass('right-active');
            });
            $('.btn-play').click(function(){
                $('.step-1').removeClass('active');
                $('.step-2').addClass('active');
                $('.btn-online').addClass('animated').addClass('wobble-down');
                $('.btn-computer').addClass('animated').addClass('wobble-up');
            });
            $('.btn-online').click(function(){
                
                
                $('.btn-computer').removeClass('active');
                $('.btn-container').removeClass('play-comp');
                $('.level-container').removeClass('active');
                
                $(this).addClass('active');
                $('.btn-container').addClass('play-online');
                $('.user-container').addClass('active');
            });
            
            
            $('.btn-computer').click(function(){
                $('.btn-online').removeClass('active');
                $('.btn-container').removeClass('play-online');
                $('.user-container').removeClass('active');
                
                $(this).addClass('active');
                $('.btn-container').addClass('play-comp');
                $('.level-container').addClass('active');
            });
            
            
            function getRandomInt(min, max)
            {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
            function game_over(){
                $('.winner-text').text('You won');
                $('.winner-img img').attr('src','img/monitor-128.png');
                $('.game-container').removeClass('active');
                $('.player-box-left').removeClass('active');
                $('.player-box-right').removeClass('active');
                        
                        
                        
                $('.home-box').removeClass('hide');
                
                $('.step-1').addClass('active');
                $('.step-2').removeClass('active');
                $('.btn-online').removeClass('animated').removeClass('wobble-down');
                $('.btn-computer').removeClass('animated').removeClass('wobble-up');
                
                
                $('.btn-online').removeClass('active');
                $('.btn-container').removeClass('play-online');
                $('.user-container').removeClass('active');
                
                $('.btn-computer').removeClass('active');
                $('.btn-container').removeClass('play-comp');
                $('.level-container').removeClass('active');
                
                $('.loader').removeClass('active');
                        
                        
                $('.game-done-container').addClass('active');
                            
            }
            function whatever(para){
                var endtimer=new Date();
                var play_time=(endtimer.getTime()-game_timer.getTime())/1000;
                //submit ur scores over here
            }
            
            
            
            //************************
            //************************
            // Online Part
            //************************
            //************************
            var getOlUserTimer=setInterval(getOnlineUsers, 5000);
            function getOnlineUsers(){
                $.ajax({
                    url:'GetOnlineUsers',
                    type:'POST',
                    success:function(data){
                        if(data.status=='e'){
                            //                            alert('Something went wrong');
                            clearTimeout(getOlUserTimer);
                        }else if(data.status=='se'){
                            //                            alert('session');
                        }else if(data.status=='f'){
                            alert(data.msg);
                        }else if(data.status=='s'){
                            
                            
                            var html=''
                            $('.user .ol-status').removeClass('active');
                            for (i = 0; i < data.users.length; i++) {
                                var best_name=data.users[i].name;
                                if (best_name.length > 15) {
                                    var arr = best_name.split(" ");
                                    if (arr.length > 1) {
                                        best_name = arr[0];
                                        if (best_name.length <= 1) {
                                            if (arr.length >= 2) {
                                                best_name = arr[0] + " " + arr[1];
                                            }
                                        }
                                    }
                                }
                                if(data.users[i].u!=null){
                                    html='<div class="user " data-email="'+data.users[i].email+'" data-name="'+data.users[i].name+'">'+
                                        '<img src="http://openseesame.tcs.com/OpenIgnite/Portfolio/struts/common/GetImage.action?usersId='+data.users[i].u+'&dmns=140&reqst='+data.users[i].reqst+'"/> '+best_name+'<span class="ol-status active"></span>'+
                                        '</div>';
                                    
                                }else{
                                    html='<div class="user " data-email="'+data.users[i].email+'" data-name="'+data.users[i].name+'">'+
                                        '<img src="icons/contacts-64.png"/> '+best_name+'<span class="ol-status active"></span>'+
                                        '</div>';
                                    
                                }
                                
                                
                                
                                if($('.ol-users .user[data-email="'+data.users[i].email+'"]').length==0){
                                    $('.ol-users .holder').append(html);
                                    $(".ol-users").mCustomScrollbar("update");
                                }else if($('.ol-users .user[data-email="'+data.users[i].email+'"]').length==1){
                                    $('.ol-users .user[data-email="'+data.users[i].email+'"]').find('.ol-status').addClass('active');
                                }
                                
                                if(data.users[i].is_busy=='1'){
                                    $('.ol-users .user[data-email="'+data.users[i].email+'"]').find('.ol-status').addClass('busy');
                                }else{
                                    $('.ol-users .user[data-email="'+data.users[i].email+'"]').find('.ol-status').removeClass('busy');
                                }
                            }
                            if($('.holder .user').length==0){
                                $('.ol-users .holder').html('<div class="no-user">No user found online</div>');
                            }
                        }
                    }
                });
            }
            
            
            
        </script>

    </body>
</html>
